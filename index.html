<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white font-sans">
  <!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ -->
  <header class="bg-gray-800 px-4 py-3 flex items-center justify-between shadow">
    <button onclick="toggleSidebar()" class="text-2xl">â˜°</button>
    <h1 class="text-xl font-bold">Ù…Ø­ÙˆÙ‘Ù„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ</h1>
  </header>  <!-- Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->  <div id="backdrop" onclick="closeSidebar()" class="hidden fixed inset-0 bg-black bg-opacity-30 z-40"></div>  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->  <aside id="sidebar" class="fixed top-0 right-0 w-64 h-full bg-gray-800 shadow-lg transform transition-transform duration-300 translate-x-full z-50">
    <div class="p-4">
      <h2 class="text-lg font-semibold mb-4">ğŸ“ Ø§Ù„Ø£Ø±Ø´ÙŠÙ</h2>
      <ul id="archiveList" class="space-y-2 max-h-[80vh] overflow-y-auto">
        <li class="text-gray-400">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ÙÙˆØ¸Ø§Øª Ø¨Ø¹Ø¯.</li>
      </ul>
    </div>
  </aside>  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->  <main class="max-w-3xl mx-auto px-4 py-6">
    <div class="mb-6">
      <h2 class="text-2xl font-semibold mb-4">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</h2>
      <div id="output" class="bg-gray-800 p-4 rounded shadow min-h-[150px] text-lg"></div>
      <div id="timer" class="mt-2 text-yellow-400">Ø§Ù„Ù…Ø¯Ø©: 0 Ø«Ø§Ù†ÙŠØ©</div>
    </div><div class="flex flex-wrap justify-center gap-4 mt-6">
  <button onclick="startRecording()" class="px-6 py-2 rounded bg-green-600 hover:bg-green-500">ğŸ¤ Ø¨Ø¯Ø¡</button>
  <button onclick="pauseRecording()" class="px-6 py-2 rounded bg-yellow-600 hover:bg-yellow-500">â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</button>
  <button onclick="resumeRecording()" class="px-6 py-2 rounded bg-blue-600 hover:bg-blue-500">â–¶ï¸ Ø§Ø³ØªØ¦Ù†Ø§Ù</button>
  <button onclick="stopRecording()" class="px-6 py-2 rounded bg-red-700 hover:bg-red-600">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù</button>
</div>

  </main>  <script>
    let recognition;
    let startTime;
    let timerInterval;
    let isPaused = false;
    let recordedText = "";
    let archive = JSON.parse(localStorage.getItem("transcripts")) || [];

    window.onload = function () {
      updateArchiveList();
    };

    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const backdrop = document.getElementById("backdrop");

      if (sidebar.classList.contains("translate-x-full")) {
        sidebar.classList.remove("translate-x-full");
        sidebar.classList.add("translate-x-0");
        backdrop.classList.remove("hidden");
      } else {
        sidebar.classList.add("translate-x-full");
        sidebar.classList.remove("translate-x-0");
        backdrop.classList.add("hidden");
      }
    }

    function closeSidebar() {
      const sidebar = document.getElementById("sidebar");
      const backdrop = document.getElementById("backdrop");
      sidebar.classList.add("translate-x-full");
      sidebar.classList.remove("translate-x-0");
      backdrop.classList.add("hidden");
    }

    function updateArchiveList() {
      const list = document.getElementById("archiveList");
      list.innerHTML = "";
      if (archive.length === 0) {
        list.innerHTML = '<li class="text-gray-400">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ÙÙˆØ¸Ø§Øª Ø¨Ø¹Ø¯.</li>';
        return;
      }
      archive.forEach((item, index) => {
        const li = document.createElement("li");
        li.className = "cursor-pointer hover:text-yellow-400";
        li.textContent = `ğŸ“„ ØªØ³Ø¬ÙŠÙ„ ${index + 1}: ${item.text.slice(0, 20)}...`;
        li.onclick = () => {
          document.getElementById("output").innerText = item.text;
          closeSidebar();
        };
        list.appendChild(li);
      });
    }

    function startRecording() {
      if (!('webkitSpeechRecognition' in window)) {
        alert("Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù…ÙŠØ²Ø© Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª");
        return;
      }

      recognition = new webkitSpeechRecognition();
      recognition.lang = "ar-SA";
      recognition.continuous = true;
      recognition.interimResults = false;

      recognition.onresult = function (event) {
        const transcript = event.results[event.results.length - 1][0].transcript;
        recordedText += transcript + " ";
        document.getElementById("output").innerText = recordedText;
      };

      recognition.onerror = function () {
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„");
      };

      recognition.start();
      isPaused = false;

      startTime = Date.now();
      timerInterval = setInterval(() => {
        const seconds = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("timer").innerText = `Ø§Ù„Ù…Ø¯Ø©: ${seconds} Ø«Ø§Ù†ÙŠØ©`;
      }, 1000);
    }

    function pauseRecording() {
      if (recognition) {
        recognition.stop();
        isPaused = true;
        clearInterval(timerInterval);
      }
    }

    function resumeRecording() {
      if (!('webkitSpeechRecognition' in window)) {
        alert("Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù…ÙŠØ²Ø© Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª");
        return;
      }

      if (!isPaused) return;

      recognition = new webkitSpeechRecognition();
      recognition.lang = "ar-SA";
      recognition.continuous = true;
      recognition.interimResults = false;

      recognition.onresult = function (event) {
        const transcript = event.results[event.results.length - 1][0].transcript;
        recordedText += transcript + " ";
        document.getElementById("output").innerText = recordedText;
      };

      recognition.start();
      isPaused = false;

      startTime = Date.now();
      timerInterval = setInterval(() => {
        const seconds = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("timer").innerText = `Ø§Ù„Ù…Ø¯Ø©: ${seconds} Ø«Ø§Ù†ÙŠØ©`;
      }, 1000);
    }

    function stopRecording() {
      if (recognition) {
        recognition.stop();
        clearInterval(timerInterval);
      }

      const finalText = recordedText.trim();
      if (finalText) {
        archive.push({ text: finalText, time: new Date().toISOString() });
        localStorage.setItem("transcripts", JSON.stringify(archive));
        updateArchiveList();
      }

      recordedText = "";
      document.getElementById("output").innerText = "";
    }
  </script></body>
</html>