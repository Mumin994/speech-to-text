<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تحويل الصوت إلى نص</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white font-sans">
  <!-- شريط علوي -->
  <header class="bg-gray-800 px-4 py-3 flex items-center justify-between shadow">
    <button onclick="toggleSidebar()" class="text-2xl">☰</button>
    <h1 class="text-xl font-bold">محوّل الصوت إلى نص</h1>
  </header>  <!-- القائمة الجانبية -->  <aside id="sidebar" class="fixed top-0 right-0 w-64 h-full bg-gray-800 shadow-lg transform translate-x-full transition-transform duration-300 z-50">
    <div class="p-4">
      <h2 class="text-lg font-semibold mb-4">القائمة</h2>
      <ul class="space-y-2">
        <li><a href="#" onclick="showArchive()" class="block hover:text-yellow-400">🗂️ الأرشيف</a></li>
        <li><a href="#" class="block hover:text-yellow-400">⚙️ الإعدادات</a></li>
        <li><a href="#" class="block hover:text-yellow-400">ℹ️ حول</a></li>
      </ul>
    </div>
  </aside>  <!-- المحتوى الرئيسي -->  <main class="max-w-3xl mx-auto px-4 py-6">
    <div class="mb-6">
      <h2 class="text-2xl font-semibold mb-4">ابدأ التسجيل</h2>
      <div id="output" class="bg-gray-800 p-4 rounded shadow min-h-[150px] text-lg">سيظهر النص هنا...</div>
      <div id="timer" class="mt-2 text-yellow-400">المدة: 0 ثانية</div>
    </div><div class="flex flex-col items-center space-y-4">
  <button onclick="startRecording()" class="w-16 h-16 rounded-full bg-red-600 text-3xl shadow hover:bg-red-500">🎤</button>
  <button onclick="stopRecording()" class="px-6 py-2 rounded bg-gray-700 hover:bg-gray-600">⏹️ إيقاف</button>
</div>

  </main>  <script>
    let recognition;
    let startTime;
    let timerInterval;

    window.onload = function () {
      const saved = localStorage.getItem("lastTranscript");
      if (saved) document.getElementById("output").innerText = saved;
    };

    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      sidebar.classList.toggle("translate-x-full");
    }

    function showArchive() {
      const saved = localStorage.getItem("lastTranscript");
      if (saved) alert("🗂️ آخر نص محفوظ:\n\n" + saved);
      else alert("لا يوجد نص محفوظ بعد.");
    }

    function startRecording() {
      if (!('webkitSpeechRecognition' in window)) {
        alert("متصفحك لا يدعم ميزة التعرف على الصوت");
        return;
      }

      recognition = new webkitSpeechRecognition();
      recognition.lang = "ar-SA";
      recognition.continuous = true;
      recognition.interimResults = false;

      recognition.onresult = function (event) {
        const transcript = event.results[event.results.length - 1][0].transcript;
        document.getElementById("output").innerText += transcript + " ";
      };

      recognition.onerror = function () {
        alert("حدث خطأ أثناء التسجيل");
      };

      recognition.start();

      startTime = Date.now();
      timerInterval = setInterval(() => {
        const seconds = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("timer").innerText = `المدة: ${seconds} ثانية`;
      }, 1000);
    }

    function stopRecording() {
      if (recognition) {
        recognition.stop();
        clearInterval(timerInterval);
      }

      const finalText = document.getElementById("output").innerText.trim();
      if (finalText) localStorage.setItem("lastTranscript", finalText);
    }
  </script></body>
</html>